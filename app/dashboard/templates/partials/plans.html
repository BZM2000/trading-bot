<section
  id="plan-section"
  hx-get="/dashboard/plans"
  hx-trigger="every 300s"
  hx-target="#plan-section"
  hx-swap="outerHTML"
>
  <h2>Plans</h2>
  <div>
    <h3>Plan {% if plan %}<small>{{ plan.ts.strftime('%Y-%m-%d %H:%M') }} UTC</small>{% endif %}</h3>
    <pre>{% if plan %}{{ plan.raw_text }}{% else %}No plan recorded yet.{% endif %}</pre>
  </div>
  <div>
    <h3>Order {% if order_plan %}<small>{{ order_plan.ts.strftime('%Y-%m-%d %H:%M') }} UTC</small>{% endif %}</h3>
    <pre>{% if order_plan %}{{ order_plan.raw_text }}{% else %}No order plan recorded yet.{% endif %}</pre>
    {% if order_plan and order_plan.machine_json %}
    <details>
      <summary>Model 3 Output</summary>
      <pre>{{ order_plan.machine_json | tojson(indent=2) }}</pre>
    </details>
    {% endif %}
  </div>
</section>
